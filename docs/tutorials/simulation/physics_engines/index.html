



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Setting up different physics engines - Procedural Generation for Gazebo</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#physics-engines" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Procedural Generation for Gazebo" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Procedural Generation for Gazebo
            </span>
            <span class="md-header-nav__topic">
              Setting up different physics engines
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Procedural Generation for Gazebo" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Procedural Generation for Gazebo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Python API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Python API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo/" title="pcg_gazebo" class="md-nav__link">
      pcg_gazebo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.generators/" title="pcg_gazebo.generators" class="md-nav__link">
      pcg_gazebo.generators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.generators.constraints/" title="pcg_gazebo.generators.constraints" class="md-nav__link">
      pcg_gazebo.generators.constraints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.generators.engines/" title="pcg_gazebo.generators.engines" class="md-nav__link">
      pcg_gazebo.generators.engines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.parsers/" title="pcg_gazebo.parsers" class="md-nav__link">
      pcg_gazebo.parsers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.parsers.sdf_config/" title="pcg_gazebo.parsers.sdf_config" class="md-nav__link">
      pcg_gazebo.parsers.sdf_config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.parsers.sdf/" title="pcg_gazebo.parsers.sdf" class="md-nav__link">
      pcg_gazebo.parsers.sdf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.parsers.types/" title="pcg_gazebo.parsers.types" class="md-nav__link">
      pcg_gazebo.parsers.types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.parsers.urdf/" title="pcg_gazebo.parsers.urdf" class="md-nav__link">
      pcg_gazebo.parsers.urdf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.simulation/" title="pcg_gazebo.simulation" class="md-nav__link">
      pcg_gazebo.simulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.simulation.physics/" title="pcg_gazebo.simulation.physics" class="md-nav__link">
      pcg_gazebo.simulation.physics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.simulation.properties/" title="pcg_gazebo.simulation.properties" class="md-nav__link">
      pcg_gazebo.simulation.properties
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python_api/pcg_gazebo.simulation.sensors/" title="pcg_gazebo.simulation.sensors" class="md-nav__link">
      pcg_gazebo.simulation.sensors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Parsers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Parsers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-1" type="checkbox" id="nav-3-1-1">
    
    <label class="md-nav__link" for="nav-3-1-1">
      SDF
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-1">
        SDF
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/geometries/" title="Geometries" class="md-nav__link">
      Geometries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/materials/" title="Materials" class="md-nav__link">
      Materials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/collisions/" title="Collisions" class="md-nav__link">
      Collisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/visuals/" title="Visuals" class="md-nav__link">
      Visuals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/links_joints_sensors/" title="Links, joints and sensors" class="md-nav__link">
      Links, joints and sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/physics_engines/" title="Physics engines" class="md-nav__link">
      Physics engines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/world/" title="World" class="md-nav__link">
      World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/sdf/convert_from_sdf_file/" title="Convert from SDF file" class="md-nav__link">
      Convert from SDF file
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-2" type="checkbox" id="nav-3-1-2">
    
    <label class="md-nav__link" for="nav-3-1-2">
      URDF
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-2">
        URDF
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/geometries/" title="Geometries" class="md-nav__link">
      Geometries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/collision/" title="Collisions" class="md-nav__link">
      Collisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/visual/" title="Visuals" class="md-nav__link">
      Visuals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/links_joints_sensors/" title="Links, joints and sensors" class="md-nav__link">
      Links, joints and sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parsers/urdf/robots/" title="Robots" class="md-nav__link">
      Robots
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Task manager
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Task manager
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../task_manager/gazebo_proxy/" title="Gazebo proxy" class="md-nav__link">
      Gazebo proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../task_manager/process_manager/" title="Process manager" class="md-nav__link">
      Process manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../task_manager/stage_conditions/" title="Stage conditions" class="md-nav__link">
      Stage conditions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3" checked>
    
    <label class="md-nav__link" for="nav-3-3">
      Simulation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Simulation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../objects/" title="Dynamically creating objects" class="md-nav__link">
      Dynamically creating objects
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Setting up different physics engines
      </label>
    
    <a href="./" title="Setting up different physics engines" class="md-nav__link md-nav__link--active">
      Setting up different physics engines
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#physics-engines" title="Physics engines" class="md-nav__link">
    Physics engines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#physics-engine-object" title="Physics engine object" class="md-nav__link">
    Physics engine object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ode" title="ODE" class="md-nav__link">
    ODE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bullet" title="Bullet" class="md-nav__link">
    Bullet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simbody" title="Simbody" class="md-nav__link">
    Simbody
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../surface_collision_properties/" title="Surface and collision properties" class="md-nav__link">
      Surface and collision properties
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../materials/" title="Materials" class="md-nav__link">
      Materials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../building_a_model/" title="Building a model" class="md-nav__link">
      Building a model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sensors/" title="Sensors" class="md-nav__link">
      Sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../meshes/" title="Meshes" class="md-nav__link">
      Meshes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model_generator/" title="Model generator" class="md-nav__link">
      Model generator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#physics-engines" title="Physics engines" class="md-nav__link">
    Physics engines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#physics-engine-object" title="Physics engine object" class="md-nav__link">
    Physics engine object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ode" title="ODE" class="md-nav__link">
    ODE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bullet" title="Bullet" class="md-nav__link">
    Bullet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simbody" title="Simbody" class="md-nav__link">
    Simbody
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Setting up different physics engines</h1>
                
                <h4 id="physics-engines">Physics engines<a class="headerlink" href="#physics-engines" title="Permanent link">&para;</a></h4>
<p>Gazebo has interfaces with four physics engines</p>
<ul>
<li>ODE</li>
<li>Simbody</li>
<li>Bullet</li>
<li>DART</li>
</ul>
<p>from which only DART has to be compiled separately.
The modules presented below allow the generation of the necessary physics engine's SDF parameters using classes.</p>
<h5 id="physics-engine-object">Physics engine object<a class="headerlink" href="#physics-engine-object" title="Permanent link">&para;</a></h5>
<p>The physics engine object holds the global parameters valid for all physics engines. </p>
<p>If this modules is used to generate the SDF data, the default parameters of the physics engine chosen (<code class="codehilite">ode</code>, <code class="codehilite">bullet</code>, <code class="codehilite">simbody</code> or <code class="codehilite">dart</code>) will be used.</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pcg_gazebo.simulation.physics</span> <span class="kn">import</span> <span class="n">Physics</span>
<span class="n">physics</span> <span class="o">=</span> <span class="n">Physics</span><span class="p">()</span>

<span class="c1"># Iterate through all parameters</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
</pre></div>

<div class="codehilite"><pre><span></span>default: False
max_step_size: 0.001
real_time_update_rate: 1000
engine: ode
max_contacts: 20
name: default_physics
real_time_factor: 1
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># The description of the parameters is also available</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="n">physics</span><span class="o">.</span><span class="n">print_description</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>default
  Description: If true, this physics element is set as the default physics profile for the world. If multiple default physics elements exist, the first element marked as default is chosen. If no default physics element exists, the first physics element is chosen.
  Current value: False
max_step_size
  Description: Maximum time step size at which every system in simulation can interact with the states of the world
  Current value: 0.001
real_time_update_rate
  Description: Rate at which to update the physics engine (UpdatePhysics calls per real-time second)
  Current value: 1000
engine
  Description: The type of the dynamics engine. Current options are ode, bullet, simbody and dart. Defaults to ode if left unspecified.
  Current value: ode
max_contacts
  Description: Maximum number of contactsallowed between two entities. This value can be over ridden by a max_contacts element in a collision element
  Current value: 20
name
  Description: The name of this set of physics parameters
  Current value: default_physics
real_time_factor
  Description: Target simulation speedupfactor, defined by ratio of simulation time to real-time
  Current value: 1
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># It is also possible to generate the SDF files.</span>
<span class="c1"># The SDF object can also be retrieved and altered if necessary</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;physics&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;ode&quot;&gt;
  &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;20&lt;/max_contacts&gt;
  &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;world name=&quot;default&quot;&gt;
  &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
  &lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;ode&quot;&gt;
    &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
    &lt;max_contacts&gt;20&lt;/max_contacts&gt;
    &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
    &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
  &lt;/physics&gt;
  &lt;include&gt;
    &lt;uri&gt;model://ground_plane&lt;/uri&gt;
  &lt;/include&gt;
  &lt;include&gt;
    &lt;uri&gt;model://sun&lt;/uri&gt;
  &lt;/include&gt;
&lt;/world&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Let&#39;s make a custom parameter set for the physics engine</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_step_size</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">physics</span><span class="o">.</span><span class="n">real_time_factor</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">physics</span><span class="o">.</span><span class="n">real_time_update_rate</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_contacts</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">physics</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;custom_physics&#39;</span>

<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;custom_physics&quot; type=&quot;ode&quot;&gt;
  &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;5&lt;/max_contacts&gt;
  &lt;max_step_size&gt;0.01&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># The resulting world file can be exported to an .world file and run in Gazebo</span>
<span class="c1"># This shows how to create an SDF file from stratch</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;sdf&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;sdf version=&quot;1.6&quot;&gt;
  &lt;world name=&quot;default&quot;&gt;
    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
    &lt;physics default=&quot;1&quot; name=&quot;custom_physics&quot; type=&quot;ode&quot;&gt;
      &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
      &lt;max_contacts&gt;5&lt;/max_contacts&gt;
      &lt;max_step_size&gt;0.01&lt;/max_step_size&gt;
      &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
    &lt;/physics&gt;
    &lt;include&gt;
      &lt;uri&gt;model://ground_plane&lt;/uri&gt;
    &lt;/include&gt;
    &lt;include&gt;
      &lt;uri&gt;model://sun&lt;/uri&gt;
    &lt;/include&gt;
  &lt;/world&gt;
&lt;/sdf&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Export to a .world file</span>
<span class="n">world_filename</span> <span class="o">=</span> <span class="s1">&#39;/tmp/physics.world&#39;</span>
<span class="n">sdf</span><span class="o">.</span><span class="n">export_xml</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">world_filename</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="c1"># Start a PCG server to run the world file in Gazebo</span>
<span class="kn">from</span> <span class="nn">pcg_gazebo.task_manager</span> <span class="kn">import</span> <span class="n">Server</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">()</span>
<span class="c1"># Create a simulation manager named default</span>
<span class="n">server</span><span class="o">.</span><span class="n">create_simulation</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_simulation</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="c1"># Run an instance of the empty.world scenario</span>
<span class="c1"># This is equivalent to run</span>
<span class="c1">#      roslaunch gazebo_ros empty_world.launch</span>
<span class="c1"># with the parameters provided to run the world file created</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">create_gazebo_task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gazebo&#39;</span><span class="p">,</span>
    <span class="n">world</span><span class="o">=</span><span class="n">world_filename</span><span class="p">,</span>
    <span class="n">gui</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">physics</span><span class="o">=</span><span class="s1">&#39;ode&#39;</span><span class="p">,</span>
    <span class="n">paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">process_timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># A task named &#39;gazebo&#39; the added to the tasks list</span>
<span class="k">print</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">get_task_list</span><span class="p">())</span>
<span class="c1"># But it is still not running</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Gazebo running: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">is_task_running</span><span class="p">(</span><span class="s1">&#39;gazebo&#39;</span><span class="p">)))</span>
<span class="c1"># Run Gazebo</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">run_all_tasks</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>[&#39;gazebo&#39;]
Is Gazebo running: False
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Check if the parameters were initialized correctly</span>
<span class="c1"># We need a Gazebo proxy object to check it</span>
<span class="kn">from</span> <span class="nn">pcg_gazebo.task_manager</span> <span class="kn">import</span> <span class="n">GazeboProxy</span>
<span class="c1"># Create a Gazebo proxy</span>
<span class="n">gazebo_proxy</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">get_gazebo_proxy</span><span class="p">()</span>

<span class="c1"># It is important to note that the default get_physics_properties service from Gazebo</span>
<span class="c1"># returns only the global and the ODE engine parameters</span>
<span class="k">print</span><span class="p">(</span><span class="n">gazebo_proxy</span><span class="o">.</span><span class="n">get_physics_properties</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>time_step: 0.01
pause: False
max_update_rate: 500.0
gravity: 
  x: 0.0
  y: 0.0
  z: -9.8
ode_config: 
  auto_disable_bodies: False
  sor_pgs_precon_iters: 0
  sor_pgs_iters: 50
  sor_pgs_w: 1.3
  sor_pgs_rms_error_tol: 0.0
  contact_surface_layer: 0.001
  contact_max_correcting_vel: 100.0
  cfm: 0.0
  erp: 0.2
  max_contacts: 5
success: True
status_message: &quot;GetPhysicsProperties: got properties&quot;
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">simulation</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">kill_all_tasks</span><span class="p">()</span>
</pre></div>

<h5 id="ode">ODE<a class="headerlink" href="#ode" title="Permanent link">&para;</a></h5>
<p>It is possible to create an instance of the physics engine configuration for each engine available.</p>
<p>The ODE is presented on the following sections.</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pcg_gazebo.simulation.physics</span> <span class="kn">import</span> <span class="n">ODE</span>
<span class="n">physics</span> <span class="o">=</span> <span class="n">ODE</span><span class="p">()</span>

<span class="c1"># Iterate through all parameters</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
</pre></div>

<div class="codehilite"><pre><span></span>use_dynamic_moi_scaling: False
cfm: 0
contact_surface_layer: 0.001
friction_model: pyramid_model
contact_max_correcting_vel: 100
iters: 50
default: False
erp: 0.2
min_step_size: 0.0001
max_step_size: 0.001
precon_iters: 0
real_time_update_rate: 1000
engine: ode
name: default_physics
max_contacts: 20
sor: 1.3
real_time_factor: 1
type: quick
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># The description of the parameters is also available</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="n">physics</span><span class="o">.</span><span class="n">print_description</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>use_dynamic_moi_scaling
  Description: Flag to enable dynamic rescaling of moment of inertia in constrained directions
  Current value: False
cfm
  Description: Constraint force mixing parameter
  Current value: 0
contact_surface_layer
  Description: The depth of the surface layer around all geometry objects. Contacts are allowed to sink into the surface layer up to the given depth before coming to rest. The default value is zero. Increasing this to some small value (e.g. 0.001) can help prevent jittering problems due to contacts being repeatedly made and broken.
  Current value: 0.001
friction_model
  Description: Name of ODE friction model to use. Valid values include: pyramid_model: (default) friction forces limited in two directions in proportion to normal force. box_model: friction forces limited to constant in two directions. cone_model: friction force magnitude limited in proportion to normal force
  Current value: pyramid_model
contact_max_correcting_vel
  Description: The maximum correcting velocities allowed when resolving contacts
  Current value: 100
iters
  Description: Number of iterations for each step. A higher number produces greater accuracy at a performance cost.
  Current value: 50
default
  Description: If true, this physics element is set as the default physics profile for the world. If multiple default physics elements exist, the first element marked as default is chosen. If no default physics element exists, the first physics element is chosen.
  Current value: False
erp
  Description: Error reduction parameter
  Current value: 0.2
min_step_size
  Description: The time duration which advances with each iteration of the dynamics engine, this has to be no bigger than max_step_size under physics block. If left unspecified, min_step_size defaults to max_step_size
  Current value: 0.0001
max_step_size
  Description: Maximum time step size at which every system in simulation can interact with the states of the world
  Current value: 0.001
precon_iters
  Description: Experimental parameter
  Current value: 0
real_time_update_rate
  Description: Rate at which to update the physics engine (UpdatePhysics calls per real-time second)
  Current value: 1000
engine
  Description: The type of the dynamics engine. Current options are ode, bullet, simbody and dart. Defaults to ode if left unspecified.
  Current value: ode
name
  Description: The name of this set of physics parameters
  Current value: default_physics
max_contacts
  Description: Maximum number of contactsallowed between two entities. This value can be over ridden by a max_contacts element in a collision element
  Current value: 20
sor
  Description: Set the successive over-relaxation parameter.
  Current value: 1.3
real_time_factor
  Description: Target simulation speedupfactor, defined by ratio of simulation time to real-time
  Current value: 1
type
  Description: One of the following types: world, quick
  Current value: quick
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># It is also possible to generate the SDF files.</span>
<span class="c1"># The SDF object can also be retrieved and altered if necessary</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;physics&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;ode&quot;&gt;
  &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;20&lt;/max_contacts&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
  &lt;ode&gt;
    &lt;solver&gt;
      &lt;use_dynamic_moi_scaling&gt;0&lt;/use_dynamic_moi_scaling&gt;
      &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
      &lt;type&gt;quick&lt;/type&gt;
      &lt;iters&gt;50&lt;/iters&gt;
      &lt;friction_model&gt;pyramid_model&lt;/friction_model&gt;
      &lt;sor&gt;1.3&lt;/sor&gt;
      &lt;precon_iters&gt;0&lt;/precon_iters&gt;
    &lt;/solver&gt;
    &lt;constraints&gt;
      &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
      &lt;cfm&gt;0.0&lt;/cfm&gt;
      &lt;contact_max_correcting_vel&gt;100.0&lt;/contact_max_correcting_vel&gt;
      &lt;erp&gt;0.2&lt;/erp&gt;
    &lt;/constraints&gt;
  &lt;/ode&gt;
  &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;world name=&quot;default&quot;&gt;
  &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
  &lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;ode&quot;&gt;
    &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
    &lt;max_contacts&gt;20&lt;/max_contacts&gt;
    &lt;ode&gt;
      &lt;solver&gt;
        &lt;use_dynamic_moi_scaling&gt;0&lt;/use_dynamic_moi_scaling&gt;
        &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
        &lt;type&gt;quick&lt;/type&gt;
        &lt;iters&gt;50&lt;/iters&gt;
        &lt;friction_model&gt;pyramid_model&lt;/friction_model&gt;
        &lt;sor&gt;1.3&lt;/sor&gt;
        &lt;precon_iters&gt;0&lt;/precon_iters&gt;
      &lt;/solver&gt;
      &lt;constraints&gt;
        &lt;contact_max_correcting_vel&gt;100.0&lt;/contact_max_correcting_vel&gt;
        &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
        &lt;cfm&gt;0.0&lt;/cfm&gt;
        &lt;erp&gt;0.2&lt;/erp&gt;
      &lt;/constraints&gt;
    &lt;/ode&gt;
    &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
    &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
  &lt;/physics&gt;
  &lt;include&gt;
    &lt;uri&gt;model://ground_plane&lt;/uri&gt;
  &lt;/include&gt;
  &lt;include&gt;
    &lt;uri&gt;model://sun&lt;/uri&gt;
  &lt;/include&gt;
&lt;/world&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Let&#39;s change some parameters</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_step_size</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="n">physics</span><span class="o">.</span><span class="n">friction_model</span> <span class="o">=</span> <span class="s1">&#39;box_model&#39;</span>
<span class="n">physics</span><span class="o">.</span><span class="n">sor</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_contacts</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">physics</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;custom_ode&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;custom_ode&quot; type=&quot;ode&quot;&gt;
  &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;10&lt;/max_contacts&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
  &lt;ode&gt;
    &lt;solver&gt;
      &lt;use_dynamic_moi_scaling&gt;0&lt;/use_dynamic_moi_scaling&gt;
      &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
      &lt;type&gt;quick&lt;/type&gt;
      &lt;iters&gt;50&lt;/iters&gt;
      &lt;friction_model&gt;box_model&lt;/friction_model&gt;
      &lt;sor&gt;1.5&lt;/sor&gt;
      &lt;precon_iters&gt;0&lt;/precon_iters&gt;
    &lt;/solver&gt;
    &lt;constraints&gt;
      &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
      &lt;cfm&gt;0.0&lt;/cfm&gt;
      &lt;contact_max_correcting_vel&gt;100.0&lt;/contact_max_correcting_vel&gt;
      &lt;erp&gt;0.2&lt;/erp&gt;
    &lt;/constraints&gt;
  &lt;/ode&gt;
  &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Exporting this world configuration to a file allows running the </span>
<span class="c1"># configured physics engine in Gazebo</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;sdf&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;sdf version=&quot;1.6&quot;&gt;
  &lt;world name=&quot;default&quot;&gt;
    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
    &lt;physics default=&quot;1&quot; name=&quot;custom_ode&quot; type=&quot;ode&quot;&gt;
      &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
      &lt;max_contacts&gt;10&lt;/max_contacts&gt;
      &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
      &lt;ode&gt;
        &lt;solver&gt;
          &lt;use_dynamic_moi_scaling&gt;0&lt;/use_dynamic_moi_scaling&gt;
          &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
          &lt;type&gt;quick&lt;/type&gt;
          &lt;iters&gt;50&lt;/iters&gt;
          &lt;friction_model&gt;box_model&lt;/friction_model&gt;
          &lt;sor&gt;1.5&lt;/sor&gt;
          &lt;precon_iters&gt;0&lt;/precon_iters&gt;
        &lt;/solver&gt;
        &lt;constraints&gt;
          &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
          &lt;cfm&gt;0.0&lt;/cfm&gt;
          &lt;contact_max_correcting_vel&gt;100.0&lt;/contact_max_correcting_vel&gt;
          &lt;erp&gt;0.2&lt;/erp&gt;
        &lt;/constraints&gt;
      &lt;/ode&gt;
      &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
    &lt;/physics&gt;
    &lt;include&gt;
      &lt;uri&gt;model://ground_plane&lt;/uri&gt;
    &lt;/include&gt;
    &lt;include&gt;
      &lt;uri&gt;model://sun&lt;/uri&gt;
    &lt;/include&gt;
  &lt;/world&gt;
&lt;/sdf&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Export to a .world file</span>
<span class="n">world_filename</span> <span class="o">=</span> <span class="s1">&#39;/tmp/physics_ode.world&#39;</span>
<span class="n">sdf</span><span class="o">.</span><span class="n">export_xml</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">world_filename</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="c1"># Remove old gazebo task</span>
<span class="n">server</span><span class="o">.</span><span class="n">create_simulation</span><span class="p">(</span><span class="s1">&#39;ode&#39;</span><span class="p">)</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_simulation</span><span class="p">(</span><span class="s1">&#39;ode&#39;</span><span class="p">)</span>
<span class="c1"># Create new task</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">create_gazebo_task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gazebo&#39;</span><span class="p">,</span>
    <span class="n">world</span><span class="o">=</span><span class="n">world_filename</span><span class="p">,</span>
    <span class="n">gui</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">physics</span><span class="o">=</span><span class="n">physics</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span>
    <span class="n">paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">process_timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># A task named &#39;gazebo&#39; the added to the tasks list</span>
<span class="k">print</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">get_task_list</span><span class="p">())</span>
<span class="c1"># But it is still not running</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Gazebo running: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">is_task_running</span><span class="p">(</span><span class="s1">&#39;gazebo&#39;</span><span class="p">)))</span>
<span class="c1"># Run Gazebo</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">run_all_tasks</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>[&#39;gazebo&#39;]
Is Gazebo running: False
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Check if the parameters were initialized correctly</span>
<span class="n">gazebo_proxy</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">get_gazebo_proxy</span><span class="p">()</span>

<span class="c1"># It is important to note that the default get_physics_properties service from Gazebo</span>
<span class="c1"># returns only the global and the ODE engine parameters</span>
<span class="k">print</span><span class="p">(</span><span class="n">gazebo_proxy</span><span class="o">.</span><span class="n">get_physics_properties</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>time_step: 0.005
pause: False
max_update_rate: 1000.0
gravity: 
  x: 0.0
  y: 0.0
  z: -9.8
ode_config: 
  auto_disable_bodies: False
  sor_pgs_precon_iters: 0
  sor_pgs_iters: 50
  sor_pgs_w: 1.5
  sor_pgs_rms_error_tol: 0.0
  contact_surface_layer: 0.001
  contact_max_correcting_vel: 100.0
  cfm: 0.0
  erp: 0.2
  max_contacts: 10
success: True
status_message: &quot;GetPhysicsProperties: got properties&quot;
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">simulation</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">kill_all_tasks</span><span class="p">()</span>
</pre></div>

<h5 id="bullet">Bullet<a class="headerlink" href="#bullet" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pcg_gazebo.simulation.physics</span> <span class="kn">import</span> <span class="n">Bullet</span>
<span class="n">physics</span> <span class="o">=</span> <span class="n">Bullet</span><span class="p">()</span>

<span class="c1"># Iterate through all parameters</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
</pre></div>

<div class="codehilite"><pre><span></span>contact_surface_layer: 0.001
cfm: 0
iters: 50
default: False
split_impulse: True
erp: 0.2
min_step_size: 0.0001
max_step_size: 0.001
split_impulse_penetration_threshold: -0.01
real_time_update_rate: 1000
engine: bullet
name: default_physics
max_contacts: 20
sor: 1.3
real_time_factor: 1
type: sequential_impulse
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># The description of the parameters is also available</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="n">physics</span><span class="o">.</span><span class="n">print_description</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>contact_surface_layer
  Description: The depth of the surface layer around all geometry objects. Contacts are allowed to sink into the surface layer up to the given depth before coming to rest. The default value is zero. Increasing this to some small value (e.g. 0.001) can help prevent jittering problems due to contacts being repeatedly made and broken.
  Current value: 0.001
cfm
  Description: Constraint force mixing parameter
  Current value: 0
iters
  Description: Number of iterations for each step. A higher number produces greater accuracy at a performance cost.
  Current value: 50
default
  Description: If true, this physics element is set as the default physics profile for the world. If multiple default physics elements exist, the first element marked as default is chosen. If no default physics element exists, the first physics element is chosen.
  Current value: False
split_impulse
  Description: Similar to ODE max_vel implementation
  Current value: True
erp
  Description: Error reduction parameter
  Current value: 0.2
min_step_size
  Description: The time duration which advances with each iteration of the dynamics engine, this has to be no bigger than max_step_size under physics block. If left unspecified, min_step_size defaults to max_step_size
  Current value: 0.0001
max_step_size
  Description: Maximum time step size at which every system in simulation can interact with the states of the world
  Current value: 0.001
split_impulse_penetration_threshold
  Description: Similarto ODE max_vel implementation
  Current value: -0.01
real_time_update_rate
  Description: Rate at which to update the physics engine (UpdatePhysics calls per real-time second)
  Current value: 1000
engine
  Description: The type of the dynamics engine. Current options are ode, bullet, simbody and dart. Defaults to ode if left unspecified.
  Current value: bullet
name
  Description: The name of this set of physics parameters
  Current value: default_physics
max_contacts
  Description: Maximum number of contactsallowed between two entities. This value can be over ridden by a max_contacts element in a collision element
  Current value: 20
sor
  Description: Set the successive over-relaxation parameter.
  Current value: 1.3
real_time_factor
  Description: Target simulation speedupfactor, defined by ratio of simulation time to real-time
  Current value: 1
type
  Description: One of the following types: sequential_impulse only
  Current value: sequential_impulse
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># It is also possible to generate the SDF files.</span>
<span class="c1"># The SDF object can also be retrieved and altered if necessary</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;physics&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;bullet&quot;&gt;
  &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
  &lt;bullet&gt;
    &lt;solver&gt;
      &lt;iters&gt;50&lt;/iters&gt;
      &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
      &lt;sor&gt;1.3&lt;/sor&gt;
      &lt;type&gt;quick&lt;/type&gt;
    &lt;/solver&gt;
    &lt;constraints&gt;
      &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
      &lt;cfm&gt;0.0&lt;/cfm&gt;
      &lt;erp&gt;0.2&lt;/erp&gt;
      &lt;split_impulse&gt;1&lt;/split_impulse&gt;
      &lt;split_impulse_penetration_threshold&gt;-0.01&lt;/split_impulse_penetration_threshold&gt;
    &lt;/constraints&gt;
  &lt;/bullet&gt;
  &lt;max_contacts&gt;20&lt;/max_contacts&gt;
  &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;world name=&quot;default&quot;&gt;
  &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
  &lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;bullet&quot;&gt;
    &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
    &lt;bullet&gt;
      &lt;solver&gt;
        &lt;iters&gt;50&lt;/iters&gt;
        &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
        &lt;sor&gt;1.3&lt;/sor&gt;
        &lt;type&gt;quick&lt;/type&gt;
      &lt;/solver&gt;
      &lt;constraints&gt;
        &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
        &lt;cfm&gt;0.0&lt;/cfm&gt;
        &lt;erp&gt;0.2&lt;/erp&gt;
        &lt;split_impulse&gt;1&lt;/split_impulse&gt;
        &lt;split_impulse_penetration_threshold&gt;-0.01&lt;/split_impulse_penetration_threshold&gt;
      &lt;/constraints&gt;
    &lt;/bullet&gt;
    &lt;max_contacts&gt;20&lt;/max_contacts&gt;
    &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
    &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
  &lt;/physics&gt;
  &lt;include&gt;
    &lt;uri&gt;model://ground_plane&lt;/uri&gt;
  &lt;/include&gt;
  &lt;include&gt;
    &lt;uri&gt;model://sun&lt;/uri&gt;
  &lt;/include&gt;
&lt;/world&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Let&#39;s change some parameters</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_step_size</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="n">physics</span><span class="o">.</span><span class="n">cfm</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">physics</span><span class="o">.</span><span class="n">sor</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_contacts</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">physics</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;custom_bullet&#39;</span>
<span class="n">physics</span><span class="o">.</span><span class="n">real_time_update_rate</span> <span class="o">=</span> <span class="mi">500</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;custom_bullet&quot; type=&quot;bullet&quot;&gt;
  &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
  &lt;bullet&gt;
    &lt;solver&gt;
      &lt;iters&gt;50&lt;/iters&gt;
      &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
      &lt;sor&gt;1.5&lt;/sor&gt;
      &lt;type&gt;quick&lt;/type&gt;
    &lt;/solver&gt;
    &lt;constraints&gt;
      &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
      &lt;cfm&gt;0.01&lt;/cfm&gt;
      &lt;erp&gt;0.2&lt;/erp&gt;
      &lt;split_impulse&gt;1&lt;/split_impulse&gt;
      &lt;split_impulse_penetration_threshold&gt;-0.01&lt;/split_impulse_penetration_threshold&gt;
    &lt;/constraints&gt;
  &lt;/bullet&gt;
  &lt;max_contacts&gt;5&lt;/max_contacts&gt;
  &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Exporting this world configuration to a file allows running the </span>
<span class="c1"># configured physics engine in Gazebo</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;sdf&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;sdf version=&quot;1.6&quot;&gt;
  &lt;world name=&quot;default&quot;&gt;
    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
    &lt;physics default=&quot;1&quot; name=&quot;custom_bullet&quot; type=&quot;bullet&quot;&gt;
      &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
      &lt;bullet&gt;
        &lt;solver&gt;
          &lt;iters&gt;50&lt;/iters&gt;
          &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
          &lt;sor&gt;1.5&lt;/sor&gt;
          &lt;type&gt;quick&lt;/type&gt;
        &lt;/solver&gt;
        &lt;constraints&gt;
          &lt;contact_surface_layer&gt;0.001&lt;/contact_surface_layer&gt;
          &lt;cfm&gt;0.01&lt;/cfm&gt;
          &lt;erp&gt;0.2&lt;/erp&gt;
          &lt;split_impulse&gt;1&lt;/split_impulse&gt;
          &lt;split_impulse_penetration_threshold&gt;-0.01&lt;/split_impulse_penetration_threshold&gt;
        &lt;/constraints&gt;
      &lt;/bullet&gt;
      &lt;max_contacts&gt;5&lt;/max_contacts&gt;
      &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
      &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
    &lt;/physics&gt;
    &lt;include&gt;
      &lt;uri&gt;model://ground_plane&lt;/uri&gt;
    &lt;/include&gt;
    &lt;include&gt;
      &lt;uri&gt;model://sun&lt;/uri&gt;
    &lt;/include&gt;
  &lt;/world&gt;
&lt;/sdf&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Export to a .world file</span>
<span class="n">world_filename</span> <span class="o">=</span> <span class="s1">&#39;/tmp/physics_bullet.world&#39;</span>
<span class="n">sdf</span><span class="o">.</span><span class="n">export_xml</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">world_filename</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="c1"># Remove old gazebo task</span>
<span class="n">server</span><span class="o">.</span><span class="n">create_simulation</span><span class="p">(</span><span class="s1">&#39;bullet&#39;</span><span class="p">)</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_simulation</span><span class="p">(</span><span class="s1">&#39;bullet&#39;</span><span class="p">)</span>
<span class="c1"># Create new task</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">create_gazebo_task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gazebo&#39;</span><span class="p">,</span>
    <span class="n">world</span><span class="o">=</span><span class="n">world_filename</span><span class="p">,</span>
    <span class="n">gui</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">physics</span><span class="o">=</span><span class="n">physics</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span>
    <span class="n">paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">process_timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># A task named &#39;gazebo&#39; the added to the tasks list</span>
<span class="k">print</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">get_task_list</span><span class="p">())</span>
<span class="c1"># But it is still not running</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Gazebo running: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">is_task_running</span><span class="p">(</span><span class="s1">&#39;gazebo&#39;</span><span class="p">)))</span>
<span class="c1"># Run Gazebo</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">run_all_tasks</span><span class="p">()</span>

<span class="c1"># The get_physics_properties service does not support bullet parameters yet</span>
</pre></div>

<div class="codehilite"><pre><span></span>[&#39;gazebo&#39;]
Is Gazebo running: False
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">simulation</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">kill_all_tasks</span><span class="p">()</span>
</pre></div>

<h5 id="simbody">Simbody<a class="headerlink" href="#simbody" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pcg_gazebo.simulation.physics</span> <span class="kn">import</span> <span class="n">Simbody</span>
<span class="n">physics</span> <span class="o">=</span> <span class="n">Simbody</span><span class="p">()</span>

<span class="c1"># Iterate through all parameters</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
</pre></div>

<div class="codehilite"><pre><span></span>stiffness: 100000000.0
viscous_friction: 0.9
dynamic_friction: 0.9
plastic_impact_velocity: 0.5
dissipation: 100
default: False
override_stiction_transition_velocity: 0.001
static_friction: 0.9
override_impact_capture_velocity: 0.001
accuracy: 0.001
min_step_size: 0.0001
max_step_size: 0.001
real_time_update_rate: 1000
engine: simbody
plastic_coef_restitution: 0.5
max_contacts: 20
name: default_physics
real_time_factor: 1
max_transient_velocity: 0.01
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># The description of the parameters is also available</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">physics</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">():</span>
    <span class="n">physics</span><span class="o">.</span><span class="n">print_description</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>stiffness
  Description: Default contact material stiffness (force/dist or torque/radian).
  Current value: 100000000.0
viscous_friction
  Description: Viscous friction [mu_v] with units of 1 / velocity
  Current value: 0.9
dynamic_friction
  Description: Dynamic friction [mu_d]
  Current value: 0.9
plastic_impact_velocity
  Description: Smallest impact velocity at which min COR is reached; set to zero if you want the min COR always to be used
  Current value: 0.5
dissipation
  Description: Dissipation coefficient to be used in compliant contact; if not given it is (1-min_cor)/plastic_impact_velocity
  Current value: 100
default
  Description: If true, this physics element is set as the default physics profile for the world. If multiple default physics elements exist, the first element marked as default is chosen. If no default physics element exists, the first physics element is chosen.
  Current value: False
override_stiction_transition_velocity
  Description: This is the largest slip velocity at which we will consider a transition to stiction. Normally inherited from a global default setting. For a continuous friction model this is the velocity at which the max static friction force is reached. Combining rule: use larger velocity
  Current value: 0.001
static_friction
  Description: Static friction [mu_s]
  Current value: 0.9
override_impact_capture_velocity
  Description: For rigid impacts only, impact velocity at which COR is set to zero; normally inherited from global default but can be overridden here. Combining rule: use larger velocity
  Current value: 0.001
accuracy
  Description: Roughly the relative error of the system. -LOG(accuracy) is roughly the number of significant digits.
  Current value: 0.001
min_step_size
  Description: (Currently not used in simbody) The time duration which advances with each iteration of the dynamics engine, this has to be no bigger than max_step_size under physics block. If left unspecified, min_step_size defaults to max_step_size
  Current value: 0.0001
max_step_size
  Description: Maximum time step size at which every system in simulation can interact with the states of the world
  Current value: 0.001
real_time_update_rate
  Description: Rate at which to update the physics engine (UpdatePhysics calls per real-time second)
  Current value: 1000
engine
  Description: The type of the dynamics engine. Current options are ode, bullet, simbody and dart. Defaults to ode if left unspecified.
  Current value: simbody
plastic_coef_restitution
  Description: This is the COR to be used at high velocities for rigid impacts; if not given it is 1 - dissipation*plastic_impact_velocity
  Current value: 0.5
max_contacts
  Description: Maximum number of contactsallowed between two entities. This value can be over ridden by a max_contacts element in a collision element
  Current value: 20
name
  Description: The name of this set of physics parameters
  Current value: default_physics
real_time_factor
  Description: Target simulation speedupfactor, defined by ratio of simulation time to real-time
  Current value: 1
max_transient_velocity
  Description: Tolerable &quot;slip&quot; velocity allowed by the solver when static friction is supposed to hold object in place.
  Current value: 0.01
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># It is also possible to generate the SDF files.</span>
<span class="c1"># The SDF object can also be retrieved and altered if necessary</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;physics&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;simbody&quot;&gt;
  &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;20&lt;/max_contacts&gt;
  &lt;simbody&gt;
    &lt;accuracy&gt;0.001&lt;/accuracy&gt;
    &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
    &lt;contact&gt;
      &lt;dissipation&gt;100.0&lt;/dissipation&gt;
      &lt;viscous_friction&gt;0.9&lt;/viscous_friction&gt;
      &lt;override_impact_capture_velocity&gt;0.001&lt;/override_impact_capture_velocity&gt;
      &lt;override_stiction_transition_velocity&gt;0.001&lt;/override_stiction_transition_velocity&gt;
      &lt;stiffness&gt;100000000.0&lt;/stiffness&gt;
      &lt;plastic_coef_restitution&gt;0.5&lt;/plastic_coef_restitution&gt;
      &lt;dynamic_friction&gt;0.9&lt;/dynamic_friction&gt;
      &lt;static_friction&gt;0.9&lt;/static_friction&gt;
      &lt;plastic_impact_velocity&gt;0.5&lt;/plastic_impact_velocity&gt;
    &lt;/contact&gt;
    &lt;max_transient_velocity&gt;0.01&lt;/max_transient_velocity&gt;
  &lt;/simbody&gt;
  &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">))</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;world name=&quot;default&quot;&gt;
  &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
  &lt;physics default=&quot;1&quot; name=&quot;default_physics&quot; type=&quot;simbody&quot;&gt;
    &lt;real_time_update_rate&gt;1000.0&lt;/real_time_update_rate&gt;
    &lt;max_contacts&gt;20&lt;/max_contacts&gt;
    &lt;simbody&gt;
      &lt;accuracy&gt;0.001&lt;/accuracy&gt;
      &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
      &lt;contact&gt;
        &lt;dissipation&gt;100.0&lt;/dissipation&gt;
        &lt;viscous_friction&gt;0.9&lt;/viscous_friction&gt;
        &lt;override_impact_capture_velocity&gt;0.001&lt;/override_impact_capture_velocity&gt;
        &lt;override_stiction_transition_velocity&gt;0.001&lt;/override_stiction_transition_velocity&gt;
        &lt;stiffness&gt;100000000.0&lt;/stiffness&gt;
        &lt;plastic_coef_restitution&gt;0.5&lt;/plastic_coef_restitution&gt;
        &lt;dynamic_friction&gt;0.9&lt;/dynamic_friction&gt;
        &lt;static_friction&gt;0.9&lt;/static_friction&gt;
        &lt;plastic_impact_velocity&gt;0.5&lt;/plastic_impact_velocity&gt;
      &lt;/contact&gt;
      &lt;max_transient_velocity&gt;0.01&lt;/max_transient_velocity&gt;
    &lt;/simbody&gt;
    &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
    &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
  &lt;/physics&gt;
  &lt;include&gt;
    &lt;uri&gt;model://ground_plane&lt;/uri&gt;
  &lt;/include&gt;
  &lt;include&gt;
    &lt;uri&gt;model://sun&lt;/uri&gt;
  &lt;/include&gt;
&lt;/world&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Let&#39;s change some parameters</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_step_size</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="n">physics</span><span class="o">.</span><span class="n">max_contacts</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">physics</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;custom_simbody&#39;</span>
<span class="n">physics</span><span class="o">.</span><span class="n">static_friction</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">physics</span><span class="o">.</span><span class="n">real_time_update_rate</span> <span class="o">=</span> <span class="mi">500</span>
<span class="k">print</span><span class="p">(</span><span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">())</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;physics default=&quot;1&quot; name=&quot;custom_simbody&quot; type=&quot;simbody&quot;&gt;
  &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
  &lt;max_contacts&gt;8&lt;/max_contacts&gt;
  &lt;simbody&gt;
    &lt;accuracy&gt;0.001&lt;/accuracy&gt;
    &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
    &lt;contact&gt;
      &lt;dissipation&gt;100.0&lt;/dissipation&gt;
      &lt;viscous_friction&gt;0.9&lt;/viscous_friction&gt;
      &lt;override_impact_capture_velocity&gt;0.001&lt;/override_impact_capture_velocity&gt;
      &lt;override_stiction_transition_velocity&gt;0.001&lt;/override_stiction_transition_velocity&gt;
      &lt;stiffness&gt;100000000.0&lt;/stiffness&gt;
      &lt;plastic_coef_restitution&gt;0.5&lt;/plastic_coef_restitution&gt;
      &lt;dynamic_friction&gt;0.9&lt;/dynamic_friction&gt;
      &lt;static_friction&gt;1.0&lt;/static_friction&gt;
      &lt;plastic_impact_velocity&gt;0.5&lt;/plastic_impact_velocity&gt;
    &lt;/contact&gt;
    &lt;max_transient_velocity&gt;0.01&lt;/max_transient_velocity&gt;
  &lt;/simbody&gt;
  &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
&lt;/physics&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Exporting this world configuration to a file allows running the </span>
<span class="c1"># configured physics engine in Gazebo</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">physics</span><span class="o">.</span><span class="n">to_sdf</span><span class="p">(</span><span class="s1">&#39;sdf&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;sdf version=&quot;1.6&quot;&gt;
  &lt;world name=&quot;default&quot;&gt;
    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;
    &lt;physics default=&quot;1&quot; name=&quot;custom_simbody&quot; type=&quot;simbody&quot;&gt;
      &lt;real_time_update_rate&gt;500.0&lt;/real_time_update_rate&gt;
      &lt;max_contacts&gt;8&lt;/max_contacts&gt;
      &lt;simbody&gt;
        &lt;accuracy&gt;0.001&lt;/accuracy&gt;
        &lt;min_step_size&gt;0.0001&lt;/min_step_size&gt;
        &lt;contact&gt;
          &lt;dissipation&gt;100.0&lt;/dissipation&gt;
          &lt;viscous_friction&gt;0.9&lt;/viscous_friction&gt;
          &lt;override_impact_capture_velocity&gt;0.001&lt;/override_impact_capture_velocity&gt;
          &lt;override_stiction_transition_velocity&gt;0.001&lt;/override_stiction_transition_velocity&gt;
          &lt;stiffness&gt;100000000.0&lt;/stiffness&gt;
          &lt;plastic_coef_restitution&gt;0.5&lt;/plastic_coef_restitution&gt;
          &lt;dynamic_friction&gt;0.9&lt;/dynamic_friction&gt;
          &lt;static_friction&gt;1.0&lt;/static_friction&gt;
          &lt;plastic_impact_velocity&gt;0.5&lt;/plastic_impact_velocity&gt;
        &lt;/contact&gt;
        &lt;max_transient_velocity&gt;0.01&lt;/max_transient_velocity&gt;
      &lt;/simbody&gt;
      &lt;max_step_size&gt;0.005&lt;/max_step_size&gt;
      &lt;real_time_factor&gt;1.0&lt;/real_time_factor&gt;
    &lt;/physics&gt;
    &lt;include&gt;
      &lt;uri&gt;model://ground_plane&lt;/uri&gt;
    &lt;/include&gt;
    &lt;include&gt;
      &lt;uri&gt;model://sun&lt;/uri&gt;
    &lt;/include&gt;
  &lt;/world&gt;
&lt;/sdf&gt;
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># Export to a .world file</span>
<span class="n">world_filename</span> <span class="o">=</span> <span class="s1">&#39;/tmp/physics_simbody.world&#39;</span>
<span class="n">sdf</span><span class="o">.</span><span class="n">export_xml</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">world_filename</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="n">server</span><span class="o">.</span><span class="n">create_simulation</span><span class="p">(</span><span class="s1">&#39;simbody&#39;</span><span class="p">)</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_simulation</span><span class="p">(</span><span class="s1">&#39;simbody&#39;</span><span class="p">)</span>
<span class="c1"># Create new task</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">create_gazebo_task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gazebo&#39;</span><span class="p">,</span>
    <span class="n">world</span><span class="o">=</span><span class="n">world_filename</span><span class="p">,</span>
    <span class="n">gui</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">physics</span><span class="o">=</span><span class="n">physics</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span>
    <span class="n">paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">process_timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># A task named &#39;gazebo&#39; the added to the tasks list</span>
<span class="k">print</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">get_task_list</span><span class="p">())</span>
<span class="c1"># But it is still not running</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Gazebo running: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">simulation</span><span class="o">.</span><span class="n">is_task_running</span><span class="p">(</span><span class="s1">&#39;gazebo&#39;</span><span class="p">)))</span>
<span class="c1"># Run Gazebo</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">run_all_tasks</span><span class="p">()</span>

<span class="c1"># The get_physics_properties service does not support simbody parameters yet</span>
</pre></div>

<div class="codehilite"><pre><span></span>[&#39;gazebo&#39;]
Is Gazebo running: False
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">simulation</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">kill_all_tasks</span><span class="p">()</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../objects/" title="Dynamically creating objects" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Dynamically creating objects
              </span>
            </div>
          </a>
        
        
          <a href="../surface_collision_properties/" title="Surface and collision properties" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Surface and collision properties
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>